<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AJAX</title>
</head>

<body>
    <p id="test-jsonp"></p>
</body>
<script>
    // function success(text) {
    //     var testarea = document.getElementById('test-response-text');
    //     testarea.value = text;
    // }

    // function fail(code) {
    //     var testarea = document.getElementById('test-response-text');
    //     testarea.value = 'Error code:' + code;
    // }

    // // 新建XMLGtttpRequest对象
    // var request;
    // if (window.XMLHttpRequest) {
    //     request = new XMLHttpRequest();
    // } else {
    //     request = new ActiveXObject('Microsoft.XMLHTTP');
    // }

    // request.onreadystatechange = function () { //状态发生变化.函数被回调
    //     if (request.readyState == 4) { // 成功完成
    //         // 判断响应结果:
    //         if (request.status == 200) {
    //             // 成功, 通过responseText拿到响应的文本
    //             return success(request.responseText);
    //         } else {
    //             //失败 根据响应码判断失败原因:
    //             return fail(request.status);
    //         }
    //     } else {
    //         // HTTP请求还在继续...
    //     }

    // }

    // // 发送请求:
    // request.open('GET', 'xing.txt')
    // request.send();

    // alert('请求已发送,请等待响应...')


    // 实例
    function refreshPrice1(data) {
        var p = document.getElementById('test-jsonp');
        p.innerHTML = '当前价格:' +
            data['0000001'].name + ':' +
            data['0000001'].price + ':' +
            'code为:' + data['0000001'].code +
            data['1399001'].name + ':' +
            data['1399001'].price;
    }

    function getPrice() {
        var js = document.createElement('script'),
            head = document.getElementsByTagName('head')[0];
        js.src = 'http://api.money.126.net/data/feed/0000001,1399001?callback=refreshPrice1';
        head.appendChild(js)
    }
    // 调用函数执行
    getPrice();
</script>

</html>